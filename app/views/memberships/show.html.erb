<img
  class="my-5"
  src="https://solawi.gaertnerei-apfeltraum.de/wp-content/uploads/2020/01/logo-bw.png"
  alt="Logo Gärtnerei Apfeltraum"
  title="Logo Gärtnerei Apfeltraum"
  data-src="https://solawi.gaertnerei-apfeltraum.de/wp-content/uploads/2020/01/logo-bw.png"
  decoding="async"
>

<h1 class="text-apfeltraum font-bold text-2xl text-center mx-auto my-10">
  Willkommen zur Bieterrunde 2022
</h1>

<% if flash[:error].present? %>
  <div class="w-full mt-3 max-w-7xl mx-auto mb-10">
    <div class="">
      <div class="border-2 border-red bg-red/20 rounded-lg">
        <p class="text-red py-6 sm:px-6 lg:px-8"><%= flash[:error] %></p>
      </div>
    </div>
  </div>
<% end %>

<% if flash[:notice].present? %>
  <div class="w-full mt-3 max-w-7xl mx-auto mb-10">
    <div class="">
      <div class="border-2 border-apfeltraum bg-apfeltraum/20 rounded-lg">
        <p class="text-apfeltraum py-6 sm:px-6 lg:px-8"><%= flash[:notice] %></p>
      </div>
    </div>
  </div>
<% end %>

<h3 class="text-apfeltraum text-lg font-medium">
  Hallo <%= @membership.name %>,
</h3>

<% if @membership.has_current_bid %>
  <div id="current_bid">
    <p>Es wurde bereits ein Gebot abgegeben für deine Mitgliedschaft mit folgenden Daten:</p>
    <p>Mitgliedschaftsnummer: <%= @membership.id %></p>
    <p>Betrag: <%= @membership.amount %></p>
    <p>Anteile: <%= @membership.shares %></p>
  </div>

<% else %>
  <div id="new_bid_form">
    du hast momentan <%= @membership.shares %> <%= @membership.shares > 1 ? 'Anteile' : 'Anteil' %>.
    <br/>
    <br/>
    <%= form_for @membership, url: { :action => "edit" }, method: :put do |form| %>
      <%= form.hidden_field :id %>
      <%= form.hidden_field :name %>
      <%= form.hidden_field :shares %>
      <%= form.label :amount, "Dein neuer Mitgliedsbeitrag für 2022:" %>
      <div class="mt-1 flex flex-col sm:flex-row">
        <div class="relative rounded-md shadow-sm grow sm:mr-1">
          <%= form.number_field :amount, in: 80.0..120.0, step: 0.1, class: "focus:ring-apfeltraum focus:border-apfeltraum block w-full pr-7 sm:text-sm border-apfeltraum rounded-md" %>
          <div class="absolute inset-y-0 right-2 pl-3 flex items-center pointer-events-none">
            <span class="text-gray-500 sm:text-sm">€</span>
          </div>
        </div>
        <%= form.button "Speichern", class: "sm:w-[140px] grow sm:grow-0 mt-1 sm:mt-0 text-white rounded-md bg-apfeltraum/80 p-1 px-4 hover:bg-apfeltraum" %>
      </div>
    <% end %>
  </div>
<% end %>
